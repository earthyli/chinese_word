<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>Cantonese Pronunciation Checker - Two Words</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 30px;
    background: #f9f9f9;
  }
  #word {
    font-size: 60px;
    margin: 20px;
  }
  button {
    padding: 15px 25px;
    font-size: 20px;
    margin: 10px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }
  #startBtn {
    background-color: #4CAF50;
    color: white;
  }
  #nextBtn {
    background-color: #2196F3;
    color: white;
  }
  #feedback {
    font-size: 60px;
    margin-top: 20px;
  }
  #status {
    font-size: 20px;
    margin-top: 15px;
    color: #555;
  }
  #transcript {
    font-size: 24px;
    margin-top: 10px;
    color: #333;
  }
  #instructions {
    margin-top: 20px;
    font-size: 20px;
    color: #444;
    background-color: #fff3cd;
    padding: 15px;
    border-radius: 8px;
    display: inline-block;
    text-align: left;
  }
</style>
</head>
<body>

<h1>å»£æ±è©±ç™¼éŸ³ç·´ç¿’ - é›™å­—è©</h1>
<div id="word">å­¸æ ¡</div>
<button id="startBtn">ğŸ¤ é–‹å§‹éŒ„éŸ³</button>
<button id="nextBtn">â¡ ä¸‹ä¸€é¡Œ</button>

<div id="instructions">
  <b>ä½¿ç”¨æ–¹æ³•ï¼š</b><br>
  1. æŒ‰ã€Œé–‹å§‹éŒ„éŸ³ã€å¾Œï¼Œæ¸…æ¥šè®€å‡ºä¸Šé¢é¡¯ç¤ºå˜…ä¸­æ–‡è©èªï¼ˆå»£æ±è©±ç™¼éŸ³ï¼‰ã€‚<br>
  2. ç³»çµ±æœƒæª¢æŸ¥ä½ å˜…è®€éŸ³ï¼Œæ­£ç¢ºæœƒé¡¯ç¤º âœ… ï¼ŒéŒ¯èª¤æœƒæ’­æ”¾æ­£ç¢ºè®€éŸ³ã€‚<br>
  3. æŒ‰ã€Œä¸‹ä¸€é¡Œã€æ›å¦ä¸€å€‹è©èªç¹¼çºŒç·´ç¿’ã€‚
</div>

<div id="feedback"></div>
<div id="status"></div>
<div id="transcript"></div>

<script>
const words = ["å­¸æ ¡", "é£Ÿé£¯", "å–æ°´", "å¯«å­—", "è²·å˜¢", "è½æ›¸", "è·‘æ­¥", "ç¡è¦º"];
let currentWord = "";
let recognition;
const feedback = document.getElementById("feedback");
const wordDiv = document.getElementById("word");
const statusDiv = document.getElementById("status");
const transcriptDiv = document.getElementById("transcript");

function randomWord() {
  currentWord = words[Math.floor(Math.random() * words.length)];
  wordDiv.textContent = currentWord;
  feedback.textContent = "";
  transcriptDiv.textContent = "";
  statusDiv.textContent = "";
}

document.getElementById("nextBtn").addEventListener("click", randomWord);

document.getElementById("startBtn").addEventListener("click", () => {
  if (!('webkitSpeechRecognition' in window)) {
    alert("ä½ çš„ç€è¦½å™¨å””æ”¯æ´èªéŸ³è­˜åˆ¥åŠŸèƒ½ã€‚");
    return;
  }

  recognition = new webkitSpeechRecognition();
  recognition.lang = "zh-HK"; // Cantonese (Hong Kong)
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;
  recognition.continuous = false; // stop automatically after result

  statusDiv.textContent = "ğŸ™ æ­£åœ¨éŒ„éŸ³...";
  feedback.textContent = "";
  transcriptDiv.textContent = "";

  recognition.start();

  recognition.onresult = (event) => {
    const transcript = event.results[event.results.length - 1][0].transcript.trim();
    transcriptDiv.textContent = `ä½ è¬›å’—: ${transcript}`;

    if (transcript === currentWord || transcript.startsWith(currentWord.slice(0,2))) {
      feedback.textContent = "âœ…";
      speak("æ­£ç¢ºï¼");
    } else {
      feedback.textContent = "âŒ";
      speak(`éŒ¯èª¤ï¼Œæ­£ç¢ºè®€æ³•ä¿‚ ${currentWord}`);
    }
  };

  recognition.onerror = (event) => {
    statusDiv.textContent = "âš  éŒ¯èª¤: " + event.error;
  };

  recognition.onend = () => {
    statusDiv.textContent = "ğŸ›‘ éŒ„éŸ³å·²åœæ­¢";
  };
});

function speak(text) {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = "zh-HK"; // Cantonese (Hong Kong)
  speechSynthesis.speak(utterance);
}

// Initialize with random word
randomWord();
</script>

</body>
</html>
